<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!-- Bootstrap API Imports -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"></script>
<!--Google Fonts Imports-->
<link href="https://fonts.googleapis.com/css?family=Hind+Vadodara|Kanit&display=swap" rel="stylesheet"> 
  <title>Jeffrey Gaydos Projects - Tank Simulation Project: Unreal Engine</title>
  <!-- This line links to the stylesheet in this repo -->
  <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<div style="background-color: darkgray;"">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">


      
        <!--Div encompasses the entire Navbar to support bootstrap components-->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                  <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <!--Picutre of Bootstrap's dark themed Navbar icon-->
                    <img src="images/Navbar.PNG" alt="NAVBAR_PNG">
                  </a>
                  <!--Removed a bootstrap tag on this div to remove the drop-down arrow-->
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="resume.html">Resume</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="project1tanks.html">1. Tank Simulation Project (Unreal Engine)</a>
                    <a class="dropdown-item" href="project2origami.html">2. Origamist: Origami Unity Project</a>
                    <a class="dropdown-item" href="project3taco.html">3. Taco Terror Redux - GCC at OSU</a>
                    <a class="dropdown-item" href="project4toolset.html">4. NWN1 Toolset Project</a>
                    <a class="dropdown-item" href="index.html">5. Coming soon...</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="index.html"> Home</a>
                  </div>
                </li>
            </ul>
          <!--This empty list serves as a "spacer" so that I can center some other thing-->
          <ul class="mr-auto"></ul>
          <h1>Jeffrey  Gaydos</h1>
          <img src="images/face.PNG" alt="Jeffrey Gaydos" style="width:5%; height:5%; padding-left: 30px;">
        </div>
      </nav>
      <!--Span will only work WITH other spans. So if you want your blocks inline, just wrap them in spans. Spans also work like spacers when you set the width-->
      <span style="display: inline-block; width: 25%;"></span>
      <span style="display: inline-block; width: 50%;"><div style="background-color: white; padding: 5%">

      <h1 style="text-align: center; padding: 1%;">Realistic Tank Simulation: Unreal Engine</h1>
      <div>
        <h2>With the help of <a href="https://tanks-encyclopedia.com/">Tank Encyclopedia</a> member Malik Cash and the awesome group of historians from <a href="https://tanks-encyclopedia.com/">Tank Encyclopedia</a>, I am collaborating to make a realistic tank simulation using calculations based on real world experiments with tanks.</h2>
        <h2>The project is NOT affiliated with <a href="https://tanks-encyclopedia.com/">Tank Encyclopedia</a> and was started by a developer known as OldRaven, who arrived at the idea from projects made by the YouTube Channel <a href="https://www.youtube.com/channel/UChhSsVCYHwhAX1GhhlwXIMQ">BoredEngineer</a>. OldRaven eventualy stopped working on the project and passed it to Malik. Malik then contacted me through my brother Brian Gaydos's affiliation with <a href="https://tanks-encyclopedia.com/">Tank Encyclopedia</a>.</h2>
        <h2>Thus far, I have been tasked with implementing balistics for the existing tank model in the project, a rough Tiger I model. The starting point to this task was to determine the angle at which certain projectiles hit the armor of a tank in 3D space.</h2>
        
        <h3>Impact Angle calculation</h3>
        <!--Double div tags allow for easy text wrapping-->
        <div style="float: left; width: 0px; height: 50%"></div>
        <div style="float: left; clear: left; padding-right: 1%; height: 13vmax; width: 50%;">
          <!--Note: video tag is required for edge (HTML5)-->
          <video width="100%" height="100%" controls>
            <source src="movies/project1tanks/algorithm1edit.mp4" type="video/mp4">
            <!--Alternate text if it fails-->
            Your browser does not support the video tag.
          </video>
        </div>
        <!--Caption-->
        <div style="float:left; clear: left; padding-left: 1%; height: 0.5%; width: 50%;">
          <strong><p style="color: brown; text-align: center;">The first algorithm, similar to a Linear Search algorithm</p></strong>
        </div>
        <!--This text is what wraps around the above video-->
        <h2>Knowing that ray casting would be essential to getting the correct collision of high-velocity projectiles in game, I assumed that the projectile could be modeled by a ray cast. First, I researched the functionality of the Unreal Engine to see if there was any way to get the normals of a mesh's face that a ray cast collided with, but I found no usable results. So I had to come up with an algorithm to determine the angle that a ray cast made with a face. Originally, I came up with an algrithm that worked similarly to a linear search algorithm under the assumption that Unreal Engine could ray cast around 180 rays at once without serious performance side effects (this was clearly not the case). Essentially, the algorithm used the location of the ray's hit (determined by the engine), and found a position slightly away from that location (so that fucture ray casts would not also collide at the original collision location). It then ray casted in the opposite direction of the original raycast, but rotated by 1 degree (in 1 axis), moving clockwise until hitting the mesh face a second time. After hitting the mesh face a second time, the angle between the original raycast and the final raycast was calculated (see video, above). Unfortunately, the algorithm only worked reasonably quickly when the calculated angle was around 20 degrees or less. Additionally, it could have an inaccuracy of up to 1 degree, possibly the diference between the projectile penetrating a tank, or bouncing off its armor.</h2>
        <!--Double Div tags allow for easy text wrapping-->
        <div style="float: right; width: 0px; height: 0px;"></div>
        <div style="float: right; clear: right; padding-left: 1%; height: 13vmax; width: 50%;">
          <!--Note: video tag is required for edge (HTML5)-->
          <video width="100%" height="100%" controls>
            <source src="movies/project1tanks/algorithm2edit.mp4" type="video/mp4">
            <!--Alternate text if it fails-->
            Your browser does not support the video tag.
          </video>
        </div>
        <!--Caption-->
        <div style="float:right; clear: right; padding-left: 1%; height: 1%; width: 50%;">
          <strong><p style="color: brown; text-align: center;">The second algorithm, more similar to a Binary Search algorithm</p></strong>
        </div>
        <!--This text is what wraps around the above video-->
        <h2>The various issues with my first method of angle calculation required me to create a better algorithm. Drawing from an algorithm I learned in my classes (Binary Search), I created a much faster and much more accurate way of calculating anlges. As one familiar with Binary Search may expect, the algorithm started by ray casting 90 degrees away from the original projectile's ray (analogous to the "half-way" point). If it hit the face, then it created a ray cast halfway between the starting ray and the new 90 degree ray. It then continues to half appropriately for a certain amount of iterations determined by the client of the function (see video for details). This algorithm ran much faster and gave extremely accurate results. Additionally, the algorithm could be throttled to be more accuracte with less performance or less accurate with more performance by changing the number of iterations it ran. This algorithm was later expanded to find the angle of impact in all 3 dimensions.</h2>

        <h3>Deflection</h3>
        <img src="images/project1tanks/Deflection Result.PNG" style="width: 45%; height: 20%; float: left; padding-right: 1%; padding-top: 1.5%; padding-left: 2%; padding-right: 2%;">
        <div style="width: 0px; height: 20px; float: left;"></div>
        <div style="float: left; clear: left; width: 45%; height: 0.5%; padding-top: 1%;">
          <strong><p style="color: brown; text-align: center;">The result of deflection simulated with my code</p></strong>
        </div>
        <!--This text is what wraps around the above image-->
        <h2>The next step was to use the angle I calculated and determine the delfection on the tank round. This is different than a bounce angle, and has to do with the round lodging into the armor of the tank. Essentially, the round strikes an armor plate at a certain angle, and that angle is modified before the bullet actually penetrates (or lodges into) the tank (see image left). The angle modification will affect penetration of the tank rounds, and is essential to making an accuracte penetration calculator. With Malik providing the equations, I implemented the deflection calculator and was able to ray cast in the new, deflected direction.</h2>
        <h3>Projectile Motion Approximation</h3>
        <h2>Another issue arose when attempting to implement this system of deflection on a simulated tank. From past experience with game design, I predicted that, depending on frame-rate, certain high-velocity objects would pass through solid objects. This issue is most common with guns and is usually solved by removing any in-game physicality to the bullet while relying solely on ray casting. For handguns this may be effectively approximated with a single straight line ray cast. But tank rounds are slower than bullets, and a straight line does not effectively approximate a tank round. However, Malik was unsure that a tank round would really be too fast for the physics engine to handle, and I agreed that this issue should be tested to see how problematic it would be become.</h2>
        <h2>Testing was done with a placeholder mesh for a bullet (a cone) and started with a thin piece of "armor" that it would be intended to collide with (see videos below). As expected, at slow speeds the bullet collided with the armor, but after reaching an initial speed of around 0.2 m/s, the bullet began to pass through the thin armor consistently. The experiment was repeated with an unrealistically thick piece of "armor", at which point the projectile collided without fail until reaching much higher speeds. However, when considering the armor of a tank, almost none have armor much thicker than a few centimeters. These experiments proved that an alternate method of projectile motion was needed.</h2>
        <span style="display: inline-block; text-align: center;">
            <video width="45%" height="30%" controls>
              <source src="movies/project1tanks/minimumclipspeed.mp4" type="video/mp4">
                Your browser does not support the video tag
            </video>
            
            <!--Spacer between the 2 videos-->
            <span style="padding: 1%;"></span>

            <video width="45%" height="30%" controls>
              <source src="movies/project1tanks/maximumclipspeed.mp4" type="video/mp4">
                Your browser does not support the video tag
            </video>
        </span>
        <div style="width: 100%; height: 4vmax;">
          <div style="float: left; clear: left; width: 45%;">
            <p class="subtitle">The bullet (yellow cone) collides inconsistently at a speed of 200m/s</p>
          </div>
          <div style="float: right; clear: right; width: 45%;">
            <p class="subtitle">The bullet (yellow cone) collides depending on the colliding object's size and the bullet's speed.</p>
          </div>
        </div>
        </span>
        <!--Double Div tags allow for easy text wrapping-->
        <div style="float: right; width: 0px; height: 5vmax;"></div>
        <div style="float: right; clear: right; padding-left: 1%; height: 13vmax; width: 50%;">
          <!--Note: video tag is required for edge (HTML5)-->
          <video width="100%" height="100%" controls>
            <source src="movies/project1tanks/raycasting.mp4" type="video/mp4">
            <!--Alternate text if it fails-->
            Your browser does not support the video tag.
          </video>
        </div>
        <!--Caption-->
        <div style="float:right; clear: right; padding-left: 1%; height: 1%; width: 50%;">
          <strong><p style="color: brown; text-align: center;">Gap and overlap were among some of the ray casting issues.</p></strong>
        </div>
        <!--This text is what wraps around the above video-->
        <h2>Naturally, I felt the best option was more ray casting. I could approximate the tank round's trajectory using a series of ray casts every frame. Originally, I used a built in function to determine the direction in which the tank round was heading, and then ray casted forwards from the position that the tank round was at that time. The was mainly an attempt to eliminate any sort of reliance on the collisions of the physics engine; whether the round collided properly or slipped through, the ray casts would still collide with the appropriate meshes. This worked to predict where the round was going, but failed to accurately record where the round had been. Depending on the frame rate and speed at which the round was travelling, there were times when there were gaps in my approximation of the round. This was unacceptable, as it would still be possible for a projectile to "skip" through another mesh. The alternative was ray casting between the projectile's current position and its last position. This way, the ends of the ray cast meet end to end, and there would be no way to have a gap in the series of ray casts regardless of frame rate. However, there is one issue with this method. Consider an instance where a projectile collides correctly with another mesh. This system of ray casting will likely not create a ray cast that intersects with the mesh that collided with the projectile. Because of this, it would be necessary to rely both on the physics engine collisions as well as the new ray casting system to get accurate and consistent collisions across all possible speeds.</h2>
        
        <h3>Implementation</h3>
        <h2>After ensuring consistent projectile collisions, all previous systems described here were implemented onto the existing Tiger I tank created by "OldRaven" or a developer helping him. Realistic values for an actual Tiger I tank were not used, as much of the specifics of tanks is highly speculated, and this implementation served merely as a proof of concept. The main difficulty with this part of the project invovled determining where the origins' transforms of each mesh were, as many were not at completely useful locations and rotations for my implementation. I would have used these transforms to determine the location and rotation of the turret, and therefore easliy fire a projectile with the appropriate ray trace approximations. However, I opted to manually store the rotation and location of the turret with local variables, taking note to ensure that future models should have useful origin transforms.</h2>
        <!--Double div tags allow for easy text wrapping-->
        <div style="width: 100%;">
          <!--Note: video tag is required for edge (HTML5)-->
          <video width="100%" height="100%" controls>
            <source src="movies/project1tanks/finalproduct.mp4" type="video/mp4">
            <!--Alternate text if it fails-->
            Your browser does not support the video tag.
          </video>
        </div>
        <!--Caption-->
        <div style="height: 0.5%; width: 100%;">
          <strong><p style="color: brown; text-align: center;">Implementation of above mechanisms onto Tiger I tank model. Fires with the correct direction and velocity according to the tank's movement.</p></strong>
        </div>
        <h3>Future Plans</h3>
        <h2>The above mechanics were made solely using visual scripting in Unreal Engine, which are prone to performance issues. Thus it is planned to migrate these algorithms to C++ scripts in Uneral Engine. Additionally, the team intends to fully simulate a British Mark V. This tank was selected for its simplicity in terms of suspension, while having multiple simple components such as machine guns and crew hatches. Many of the features used by creating this tank should be reusable for future tanks.</h2>
      </div>
      <p style="text-align: center;"><a class="btn btn-dark btn-lg" href="index.html" role="button">Back</a></p>
    </div></span>
    <span style="display: inline-block; width: 25%;"></span>
</body style="background-color: darkgray;">
